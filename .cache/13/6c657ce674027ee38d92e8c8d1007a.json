{"id":"PEno","dependencies":[{"name":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\package.json","includedInParent":true,"mtime":1609852920041},{"name":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\.babelrc","includedInParent":true,"mtime":1609011634790},{"name":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\package.json","includedInParent":true,"mtime":1609798091183},{"name":"../../utils/logger","loc":{"line":1,"column":19},"parent":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api\\actions\\update.js","resolved":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\utils\\logger.js"},{"name":"../../utils/isSubset","loc":{"line":2,"column":21},"parent":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api\\actions\\update.js","resolved":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\utils\\isSubset.js"},{"name":"../../utils/updateObject","loc":{"line":3,"column":25},"parent":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api\\actions\\update.js","resolved":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\utils\\updateObject.js"},{"name":"../../api-utils/success","loc":{"line":4,"column":20},"parent":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api\\actions\\update.js","resolved":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api-utils\\success.js"},{"name":"../../api-utils/error","loc":{"line":5,"column":18},"parent":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api\\actions\\update.js","resolved":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api-utils\\error.js"},{"name":"../../api-utils/showUserErrors","loc":{"line":6,"column":27},"parent":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api\\actions\\update.js","resolved":"D:\\learninig\\Templates\\Javascript_templates (without framework)\\JS-Pad\\node_modules\\localbase\\localbase\\api-utils\\showUserErrors.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=s;var t=r(require(\"../../utils/logger\")),e=r(require(\"../../utils/isSubset\")),i=r(require(\"../../utils/updateObject\")),l=r(require(\"../../api-utils/success\")),u=r(require(\"../../api-utils/error\")),o=r(require(\"../../api-utils/showUserErrors\"));function r(t){return t&&t.__esModule?t:{default:t}}function s(r){let s=this.collectionName,n=this.docSelectionCriteria;return new Promise((a,c)=>{this.updateDocumentByCriteria=(()=>{let o=[];this.lf[s].iterate((t,l)=>{if((0,e.default)(t,n)){let e=(0,i.default)(t,r);o.push({key:l,newDocument:e})}}).then(()=>{o.length||c(u.default.call(this,`No Documents found in ${s} Collection with criteria ${JSON.stringify(n)}.`)),o.length>1&&t.default.warn.call(this,`Multiple documents (${o.length}) with ${JSON.stringify(n)} found for updating.`)}).then(()=>{o.forEach((t,e)=>{this.lf[s].setItem(t.key,t.newDocument).then(t=>{e===o.length-1&&a(l.default.call(this,`${o.length} Document${o.length>1?\"s\":\"\"} in \"${s}\" collection with ${JSON.stringify(n)} updated with:`,r))}).catch(t=>{c(u.default.call(this,`Could not update ${o.length} Documents in ${s} Collection.`))})})})}),this.updateDocumentByKey=(()=>{let t={};this.lf[s].getItem(n).then(e=>{t=(0,i.default)(e,r),this.lf[s].setItem(n,t),a(l.default.call(this,`Document in \"${s}\" collection with key ${JSON.stringify(n)} updated to:`,t))}).catch(t=>{c(u.default.call(this,`No Document found in \"${s}\" collection with key ${JSON.stringify(n)}`))})}),r?\"object\"==typeof r&&r instanceof Array==0||this.userErrors.push(\"Data passed to .update() must be an object. Not an array, string, number or boolean.\"):this.userErrors.push('No update object provided to update() method. Use an object e.g. { name: \"William\" }'),this.userErrors.length?o.default.call(this):\"object\"==typeof n?this.updateDocumentByCriteria():this.updateDocumentByKey()})}"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":0}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":13}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":20}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":35}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":43}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":56}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":57}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":64}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":68}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":76}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":84}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":162}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":164}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":166}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":203}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":205}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":207}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":215}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":243}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":245}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":247}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":255}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":6,"column":0},"generated":{"line":1,"column":281}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":6,"column":0},"generated":{"line":1,"column":283}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":6,"column":0},"generated":{"line":1,"column":285}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":6,"column":0},"generated":{"line":1,"column":293}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":328}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":337}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":339}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":342}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":349}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":352}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":354}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":365}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":367}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":368}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":105,"column":1},"generated":{"line":1,"column":376}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":8,"column":15},"generated":{"line":1,"column":379}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"update","original":{"line":8,"column":24},"generated":{"line":1,"column":388}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":8,"column":31},"generated":{"line":1,"column":390}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":9,"column":6},"generated":{"line":1,"column":393}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":9,"column":6},"generated":{"line":1,"column":397}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":9,"column":23},"generated":{"line":1,"column":399}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":9,"column":28},"generated":{"line":1,"column":404}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":10,"column":6},"generated":{"line":1,"column":419}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":10,"column":29},"generated":{"line":1,"column":421}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":10,"column":34},"generated":{"line":1,"column":426}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":12,"column":9},"generated":{"line":1,"column":447}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":12,"column":9},"generated":{"line":1,"column":454}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"Promise","original":{"line":12,"column":13},"generated":{"line":1,"column":458}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":12,"column":21},"generated":{"line":1,"column":466}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"resolve","original":{"line":12,"column":22},"generated":{"line":1,"column":467}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"reject","original":{"line":12,"column":31},"generated":{"line":1,"column":469}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByCriteria","original":{"line":15,"column":9},"generated":{"line":1,"column":474}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByCriteria","original":{"line":15,"column":9},"generated":{"line":1,"column":479}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":15,"column":36},"generated":{"line":1,"column":504}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":16,"column":10},"generated":{"line":1,"column":510}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":16,"column":10},"generated":{"line":1,"column":514}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":16,"column":25},"generated":{"line":1,"column":516}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":17,"column":11},"generated":{"line":1,"column":519}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":17,"column":11},"generated":{"line":1,"column":524}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":17,"column":14},"generated":{"line":1,"column":527}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"iterate","original":{"line":17,"column":30},"generated":{"line":1,"column":530}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":17,"column":38},"generated":{"line":1,"column":538}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":17,"column":39},"generated":{"line":1,"column":539}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"key","original":{"line":17,"column":46},"generated":{"line":1,"column":541}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":18,"column":12},"generated":{"line":1,"column":546}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":18,"column":12},"generated":{"line":1,"column":550}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":18,"column":21},"generated":{"line":1,"column":552}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":18,"column":21},"generated":{"line":1,"column":554}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":18,"column":21},"generated":{"line":1,"column":563}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":18,"column":28},"generated":{"line":1,"column":565}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":18,"column":51},"generated":{"line":1,"column":568}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":19,"column":14},"generated":{"line":1,"column":569}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":19,"column":14},"generated":{"line":1,"column":573}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":19,"column":28},"generated":{"line":1,"column":576}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":19,"column":41},"generated":{"line":1,"column":578}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":19,"column":41},"generated":{"line":1,"column":580}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":19,"column":41},"generated":{"line":1,"column":589}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":19,"column":48},"generated":{"line":1,"column":591}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":20,"column":10},"generated":{"line":1,"column":594}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"push","original":{"line":20,"column":23},"generated":{"line":1,"column":596}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":20,"column":28},"generated":{"line":1,"column":601}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"key","original":{"line":20,"column":30},"generated":{"line":1,"column":602}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"key","original":{"line":20,"column":30},"generated":{"line":1,"column":606}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":20,"column":35},"generated":{"line":1,"column":608}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":20,"column":35},"generated":{"line":1,"column":620}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"then","original":{"line":22,"column":9},"generated":{"line":1,"column":627}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":22,"column":14},"generated":{"line":1,"column":632}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":23,"column":13},"generated":{"line":1,"column":637}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":23,"column":26},"generated":{"line":1,"column":639}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"reject","original":{"line":24,"column":10},"generated":{"line":1,"column":647}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"error","original":{"line":25,"column":12},"generated":{"line":1,"column":649}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":25,"column":18},"generated":{"line":1,"column":651}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":25,"column":18},"generated":{"line":1,"column":659}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":26,"column":14},"generated":{"line":1,"column":664}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":27,"column":40},"generated":{"line":1,"column":694}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"JSON","original":{"line":27,"column":85},"generated":{"line":1,"column":724}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"stringify","original":{"line":27,"column":90},"generated":{"line":1,"column":729}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":27,"column":100},"generated":{"line":1,"column":739}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":31,"column":12},"generated":{"line":1,"column":747}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":31,"column":25},"generated":{"line":1,"column":749}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":31,"column":34},"generated":{"line":1,"column":756}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"warn","original":{"line":32,"column":17},"generated":{"line":1,"column":759}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"warn","original":{"line":32,"column":17},"generated":{"line":1,"column":761}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"warn","original":{"line":32,"column":17},"generated":{"line":1,"column":769}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":32,"column":22},"generated":{"line":1,"column":774}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":32,"column":27},"generated":{"line":1,"column":779}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":32,"column":57},"generated":{"line":1,"column":807}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":32,"column":70},"generated":{"line":1,"column":809}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"JSON","original":{"line":32,"column":88},"generated":{"line":1,"column":825}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"stringify","original":{"line":32,"column":93},"generated":{"line":1,"column":830}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":32,"column":103},"generated":{"line":1,"column":840}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"then","original":{"line":34,"column":9},"generated":{"line":1,"column":868}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":34,"column":14},"generated":{"line":1,"column":873}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":35,"column":8},"generated":{"line":1,"column":878}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"forEach","original":{"line":35,"column":21},"generated":{"line":1,"column":880}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":35,"column":29},"generated":{"line":1,"column":888}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docToUpdate","original":{"line":35,"column":30},"generated":{"line":1,"column":889}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"index","original":{"line":35,"column":43},"generated":{"line":1,"column":891}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":36,"column":15},"generated":{"line":1,"column":896}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":36,"column":15},"generated":{"line":1,"column":901}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":36,"column":18},"generated":{"line":1,"column":904}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"setItem","original":{"line":36,"column":34},"generated":{"line":1,"column":907}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docToUpdate","original":{"line":36,"column":42},"generated":{"line":1,"column":915}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"key","original":{"line":36,"column":54},"generated":{"line":1,"column":917}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docToUpdate","original":{"line":36,"column":59},"generated":{"line":1,"column":921}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":36,"column":71},"generated":{"line":1,"column":923}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"then","original":{"line":36,"column":84},"generated":{"line":1,"column":936}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":36,"column":89},"generated":{"line":1,"column":941}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"index","original":{"line":38,"column":16},"generated":{"line":1,"column":945}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":38,"column":27},"generated":{"line":1,"column":949}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":38,"column":40},"generated":{"line":1,"column":951}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":38,"column":49},"generated":{"line":1,"column":958}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"resolve","original":{"line":39,"column":14},"generated":{"line":1,"column":961}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"success","original":{"line":40,"column":16},"generated":{"line":1,"column":963}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":40,"column":24},"generated":{"line":1,"column":965}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":40,"column":24},"generated":{"line":1,"column":973}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":41,"column":18},"generated":{"line":1,"column":978}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":42,"column":22},"generated":{"line":1,"column":986}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":42,"column":35},"generated":{"line":1,"column":988}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":42,"column":55},"generated":{"line":1,"column":1006}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":42,"column":68},"generated":{"line":1,"column":1008}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":42,"column":77},"generated":{"line":1,"column":1015}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":42,"column":81},"generated":{"line":1,"column":1017}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":42,"column":87},"generated":{"line":1,"column":1021}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":42,"column":99},"generated":{"line":1,"column":1031}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"JSON","original":{"line":42,"column":136},"generated":{"line":1,"column":1053}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"stringify","original":{"line":42,"column":141},"generated":{"line":1,"column":1058}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":42,"column":151},"generated":{"line":1,"column":1068}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":43,"column":18},"generated":{"line":1,"column":1087}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"catch","original":{"line":48,"column":13},"generated":{"line":1,"column":1093}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"err","original":{"line":48,"column":19},"generated":{"line":1,"column":1099}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"reject","original":{"line":49,"column":12},"generated":{"line":1,"column":1103}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"error","original":{"line":50,"column":14},"generated":{"line":1,"column":1105}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":50,"column":20},"generated":{"line":1,"column":1107}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":50,"column":20},"generated":{"line":1,"column":1115}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":51,"column":16},"generated":{"line":1,"column":1120}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docsToUpdate","original":{"line":52,"column":37},"generated":{"line":1,"column":1145}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":52,"column":50},"generated":{"line":1,"column":1147}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":52,"column":75},"generated":{"line":1,"column":1170}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByKey","original":{"line":61,"column":9},"generated":{"line":1,"column":1196}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByKey","original":{"line":61,"column":9},"generated":{"line":1,"column":1201}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":61,"column":31},"generated":{"line":1,"column":1221}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":62,"column":10},"generated":{"line":1,"column":1227}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":62,"column":10},"generated":{"line":1,"column":1231}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":62,"column":24},"generated":{"line":1,"column":1233}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":63,"column":11},"generated":{"line":1,"column":1236}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":63,"column":11},"generated":{"line":1,"column":1241}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":63,"column":14},"generated":{"line":1,"column":1244}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"getItem","original":{"line":63,"column":30},"generated":{"line":1,"column":1247}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":63,"column":38},"generated":{"line":1,"column":1255}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"then","original":{"line":63,"column":60},"generated":{"line":1,"column":1258}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":63,"column":65},"generated":{"line":1,"column":1263}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":64,"column":8},"generated":{"line":1,"column":1267}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":64,"column":22},"generated":{"line":1,"column":1270}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":64,"column":35},"generated":{"line":1,"column":1272}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":64,"column":35},"generated":{"line":1,"column":1274}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"value","original":{"line":64,"column":35},"generated":{"line":1,"column":1283}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":64,"column":42},"generated":{"line":1,"column":1285}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":65,"column":13},"generated":{"line":1,"column":1288}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"lf","original":{"line":65,"column":13},"generated":{"line":1,"column":1293}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":65,"column":16},"generated":{"line":1,"column":1296}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"setItem","original":{"line":65,"column":32},"generated":{"line":1,"column":1299}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":65,"column":40},"generated":{"line":1,"column":1307}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":65,"column":62},"generated":{"line":1,"column":1309}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"resolve","original":{"line":66,"column":8},"generated":{"line":1,"column":1312}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"success","original":{"line":67,"column":10},"generated":{"line":1,"column":1314}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":67,"column":18},"generated":{"line":1,"column":1316}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":67,"column":18},"generated":{"line":1,"column":1324}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":68,"column":12},"generated":{"line":1,"column":1329}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":69,"column":29},"generated":{"line":1,"column":1350}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"JSON","original":{"line":69,"column":70},"generated":{"line":1,"column":1376}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"stringify","original":{"line":69,"column":75},"generated":{"line":1,"column":1381}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":69,"column":85},"generated":{"line":1,"column":1391}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"newDocument","original":{"line":70,"column":12},"generated":{"line":1,"column":1408}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"catch","original":{"line":73,"column":9},"generated":{"line":1,"column":1414}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"err","original":{"line":73,"column":15},"generated":{"line":1,"column":1420}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"reject","original":{"line":74,"column":8},"generated":{"line":1,"column":1424}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"error","original":{"line":75,"column":10},"generated":{"line":1,"column":1426}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":75,"column":16},"generated":{"line":1,"column":1428}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":75,"column":16},"generated":{"line":1,"column":1436}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":76,"column":12},"generated":{"line":1,"column":1441}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"collectionName","original":{"line":77,"column":38},"generated":{"line":1,"column":1471}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"JSON","original":{"line":77,"column":79},"generated":{"line":1,"column":1497}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"stringify","original":{"line":77,"column":84},"generated":{"line":1,"column":1502}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":77,"column":94},"generated":{"line":1,"column":1512}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":84,"column":9},"generated":{"line":1,"column":1523}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":87,"column":36},"generated":{"line":1,"column":1525}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":87,"column":22},"generated":{"line":1,"column":1542}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docUpdates","original":{"line":87,"column":48},"generated":{"line":1,"column":1545}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"Array","original":{"line":87,"column":70},"generated":{"line":1,"column":1558}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":87,"column":79},"generated":{"line":1,"column":1565}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"userErrors","original":{"line":88,"column":11},"generated":{"line":1,"column":1568}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"userErrors","original":{"line":88,"column":11},"generated":{"line":1,"column":1573}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"push","original":{"line":88,"column":22},"generated":{"line":1,"column":1584}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":88,"column":27},"generated":{"line":1,"column":1589}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"userErrors","original":{"line":85,"column":11},"generated":{"line":1,"column":1677}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"userErrors","original":{"line":85,"column":11},"generated":{"line":1,"column":1682}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"push","original":{"line":85,"column":22},"generated":{"line":1,"column":1693}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":85,"column":27},"generated":{"line":1,"column":1698}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":91,"column":9},"generated":{"line":1,"column":1786}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"userErrors","original":{"line":91,"column":14},"generated":{"line":1,"column":1791}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"length","original":{"line":91,"column":25},"generated":{"line":1,"column":1802}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":100,"column":21},"generated":{"line":1,"column":1809}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":100,"column":21},"generated":{"line":1,"column":1811}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"call","original":{"line":100,"column":21},"generated":{"line":1,"column":1819}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":100,"column":26},"generated":{"line":1,"column":1824}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","original":{"line":92,"column":41},"generated":{"line":1,"column":1830}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"docSelectionCriteria","original":{"line":92,"column":17},"generated":{"line":1,"column":1847}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByCriteria","original":{"line":93,"column":13},"generated":{"line":1,"column":1849}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByCriteria","original":{"line":93,"column":13},"generated":{"line":1,"column":1854}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByKey","original":{"line":96,"column":13},"generated":{"line":1,"column":1881}},{"source":"../node_modules/localbase/localbase/api/actions/update.js","name":"updateDocumentByKey","original":{"line":96,"column":13},"generated":{"line":1,"column":1886}}],"sources":{"../node_modules/localbase/localbase/api/actions/update.js":"import logger from '../../utils/logger'\nimport isSubset from '../../utils/isSubset'\nimport updateObject from '../../utils/updateObject'\nimport success from '../../api-utils/success'\nimport error from '../../api-utils/error'\nimport showUserErrors from '../../api-utils/showUserErrors'\n\nexport default function update(docUpdates) {\n  let collectionName = this.collectionName\n  let docSelectionCriteria = this.docSelectionCriteria\n\n  return new Promise((resolve, reject) => {\n\n    // update document by criteria\n    this.updateDocumentByCriteria = () => {\n      let docsToUpdate = []\n      this.lf[collectionName].iterate((value, key) => {\n        if (isSubset(value, docSelectionCriteria)) {\n          let newDocument = updateObject(value, docUpdates)\n          docsToUpdate.push({ key, newDocument })\n        }\n      }).then(() => {\n        if (!docsToUpdate.length) {\n          reject(\n            error.call(\n              this,\n              `No Documents found in ${ collectionName } Collection with criteria ${ JSON.stringify(docSelectionCriteria) }.`\n            )\n          )\n        }\n        if (docsToUpdate.length > 1) {\n          logger.warn.call(this, `Multiple documents (${ docsToUpdate.length }) with ${ JSON.stringify(docSelectionCriteria) } found for updating.`)\n        }\n      }).then(() => {\n        docsToUpdate.forEach((docToUpdate, index) => {\n          this.lf[collectionName].setItem(docToUpdate.key, docToUpdate.newDocument).then(value => {\n\n            if (index === (docsToUpdate.length - 1)) {\n              resolve(\n                success.call(\n                  this,\n                  `${ docsToUpdate.length } Document${ docsToUpdate.length > 1 ? 's' : '' } in \"${ collectionName }\" collection with ${ JSON.stringify(docSelectionCriteria) } updated with:`,\n                  docUpdates\n                )\n              )\n            }\n\n          }).catch(err => {\n            reject(\n              error.call(\n                this,\n                `Could not update ${ docsToUpdate.length } Documents in ${ collectionName } Collection.`\n              )\n            )\n          })\n        })\n      })\n    }\n  \n    // update document by key\n    this.updateDocumentByKey = () => {\n      let newDocument = {}\n      this.lf[collectionName].getItem(docSelectionCriteria).then(value => {\n        newDocument = updateObject(value, docUpdates)\n        this.lf[collectionName].setItem(docSelectionCriteria, newDocument)\n        resolve(\n          success.call(\n            this,\n            `Document in \"${ collectionName }\" collection with key ${ JSON.stringify(docSelectionCriteria) } updated to:`,\n            newDocument\n          )\n        )\n      }).catch(err => {\n        reject(\n          error.call(\n            this,\n            `No Document found in \"${ collectionName }\" collection with key ${ JSON.stringify(docSelectionCriteria) }`\n          )\n        )\n      })\n    }\n\n    // check for user errors\n    if (!docUpdates) {\n      this.userErrors.push('No update object provided to update() method. Use an object e.g. { name: \"William\" }')\n    }\n    else if (!(typeof docUpdates == 'object' && docUpdates instanceof Array == false)) {\n      this.userErrors.push('Data passed to .update() must be an object. Not an array, string, number or boolean.')\n    }\n\n    if (!this.userErrors.length) {\n      if (typeof docSelectionCriteria == 'object') {\n        this.updateDocumentByCriteria()\n      }\n      else {\n        this.updateDocumentByKey()\n      }\n    }\n    else {\n      showUserErrors.call(this)\n    }\n\n  })\n\n}"},"lineCount":null}},"error":null,"hash":"00d1ee9fa4c8d007320084c943afe701","cacheData":{"env":{}}}